---
import Container from '@/components/Container.astro'
import Link from '@/components/Link.astro'
import MobileMenu from '@/components/ui/mobile-menu'
import { NAV_LINKS } from '@/consts'
import { Image } from 'astro:assets'
import { Icon } from 'astro-icon/components'
import logo from '../../public/static/logo.webp'

---

<header
  class="sticky top-0 z-20 bg-background/50 backdrop-blur-md"
  transition:persist
>
  <Container>
    <div class="flex flex-wrap items-center justify-between gap-4 py-4 ">
      <Link href="/" class="logo-link">
        <Image src={logo} alt="Logo" class="size-8 -scale-x-100 border-2 border-[color:rgba(241,140,110,0.4)] shadow-[4px_4px_0_rgba(0,0,0,0.2)] transition-all duration-300" />
      </Link>
      <div class="flex items-center gap-2 sm:gap-4">
        <nav class="hidden items-center gap-2 text-base sm:flex sm:gap-3">
          {
            NAV_LINKS.map((item) => (
              <Link
                href={item.href}
                class="pixel-button inline-flex items-center justify-center gap-2 px-4 py-2 h-9 text-sm font-semibold uppercase tracking-wider bg-background/75 text-foreground border-[color:rgba(137,110,96,0.45)] hover:bg-primary/20 hover:text-primary hover:border-[color:rgba(217,119,87,0.65)] dark:bg-input/30 dark:border-[color:rgba(255,255,255,0.18)] dark:hover:bg-primary/25 dark:hover:text-primary dark:hover:border-[color:rgba(241,140,110,0.75)] transition-all"
              >
                <Icon name={item.icon} class="size-[18px] shrink-0" />
                <span>{item.label}</span>
              </Link>
            ))
          }
        </nav>
        <MobileMenu client:load transition:persist />
        <!-- <ModeToggle client:load transition:persist /> -->
      </div>
    </div>
  </Container>
</header>

<style>
  .logo-link:hover img {
    border-color: hsl(var(--primary));
    box-shadow:
      0 0 12px rgba(241, 140, 110, 0.6),
      0 0 24px rgba(241, 140, 110, 0.4),
      0 0 36px rgba(241, 140, 110, 0.2),
      4px 4px 0 rgba(0, 0, 0, 0.2);
    transform: scale(1.05);
  }

  nav :global(.pixel-button:hover) {
    box-shadow:
      0 0 12px rgba(241, 140, 110, 0.5),
      0 0 24px rgba(241, 140, 110, 0.3),
      0 0 36px rgba(241, 140, 110, 0.15),
      4px 4px 0 rgba(0, 0, 0, 0.2) !important;
  }

  .dark nav :global(.pixel-button:hover) {
    box-shadow:
      0 0 12px rgba(241, 140, 110, 0.5),
      0 0 24px rgba(241, 140, 110, 0.3),
      0 0 36px rgba(241, 140, 110, 0.15),
      4px 4px 0 rgba(0, 0, 0, 0.4) !important;
  }
</style>
