---
import DevCloudServices from '@/components/bento/DevCloudServices'
import DiscordPresence from '@/components/bento/DiscordPresence.tsx'
import GithubCalendar from '@/components/bento/GithubCalendar.tsx'
import WakatimeGraph from '@/components/bento/WakatimeGraph.tsx'
import Link from '@/components/Link.astro'
import { BorderBeam } from '@/components/magicui/border-beam'
import FuzzyText from '@/components/magicui/fuzzy-text'
import GradientText from '@/components/magicui/gradint-text'
import LetterGlitch from '@/components/magicui/letter-glitch'
import MagnetLines from '@/components/magicui/magnet-lines'
import { DEV_LINKS, SITE, SOCIAL_LINKS } from '@/consts'
import Layout from '@/layouts/Layout.astro'
import { Icon } from 'astro-icon/components'
import { getCollection } from 'astro:content'

const latestPost = await getCollection('blog').then((posts: any[]) =>
  posts
    .sort(
      (a, b) =>
        new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
    )
    .filter((post) => !post.data.hidden && !post.data.draft)
    .at(0),
)
---

<Layout title="Home" description={SITE.DESCRIPTION}>
  <section
    class="mx-auto grid max-w-[375px] grid-cols-2 gap-4 px-4 [grid-template-areas:'a_a'_'a_a'_'b_b'_'b_b'_'e_e'_'h_i'_'h_c'_'k_c'_'d_d'_'d_d'_'g_g'_'g_g'_'f_f'_'j_j'_'j_j'] *:rounded-3xl *:border *:bg-secondary/25 *:bg-cover *:bg-center *:bg-no-repeat sm:max-w-screen-sm sm:[grid-template-areas:'a_a'_'b_d'_'e_e'_'j_g'_'h_i'_'h_c'_'k_c'_'f_f'] xl:max-w-screen-xl xl:grid-cols-4 xl:[grid-template-areas:'a_a_b_c'_'d_e_e_c'_'h_f_f_g'_'h_i_j_k'] xl:[&:hover:has(>.has-overlay:hover)>.first>.overlay]:opacity-100 xl:[&:hover>*:not(.first):hover_.overlay]:opacity-100"
    aria-label="Personal information and activity grid"
  >
    <div
      class="first aspect-square flex relative justify-center rounded-3xl border bg-[url('/static/404.svg')] bg-cover bg-center bg-no-repeat [grid-area:a] sm:aspect-[2.1/1] sm:bg-[url('/static/404.svg')] xl:aspect-auto"
      role="img"
      aria-label="Introduction"
    > 
      <div class="justify-center absolute bottom-2" >
        <FuzzyText client:load
          baseIntensity={0.12} 
          hoverIntensity={0.24}
          fontSize={96}
          color="#fbb229",
        >4O4</FuzzyText>
        <div class="mt-3 mb-3"></div>
        <FuzzyText client:load
          baseIntensity={0.12} 
          hoverIntensity={0.24}
          fontSize={33}
          color='#f95038'
        >Not Found</FuzzyText>
      </div>
      
      <!-- <div
        class="overlay size-full rounded-3xl bg-[url('/static/bento/about-silhouette.webp')] bg-cover bg-center bg-no-repeat opacity-0 transition-opacity duration-200"
      >
      </div> -->
    </div>

    <div
      class="has-overlay relative aspect-square items-center justify-center [grid-area:b] bg-[url('/static/honeycomb.webp')]
      grid grid-cols-4 grid-rows-3"
      style="grid-template-columns: 2.85fr 2.95fr 2.9fr 1.3fr;grid-template-rows: 4.7fr 3.4fr 2.8fr;"
      aria-label="Developer Stack Shortcuts"
    >
      <!-- <div
        class="overlay size-full rounded-3xl  bg-cover bg-center bg-no-repeat transition-opacity duration-200 xl:opacity-0"
      >
      </div> -->
      <!-- <DevStackIconsCloud client:load/> -->
      <div class="max-w max-h inline-block mt-[2.6em] sm:mt-[2.35em]">
        <Link
        href={DEV_LINKS.find((link) => link.label === 'Gitea')?.href ||
          '#'}
          title="ä»£ç ä»“åº“"
          aria-label="ä»£ç ä»“åº“"
          target="_blank"
        >
          <div
            class="bottom-0 right-0 w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
          >
            <Icon
              style="color: rgb(233, 211, 182);"
              name="mdi:git"
              class="z-[1] size-1/2 text-primary sm:size-8 size-8"
              aria-hidden="true"
            />
          </div>
        </Link>
      </div>

      <div class="max-w max-h inline-block mt-[-3.7em] ml-[0.1em] sm:mt-[-3.4em] sm:ml-[0em]">
        <Link
        href={DEV_LINKS.find((link) => link.label === 'Nexus')?.href ||
          '#'}
          title="Mavenä»“åº“"
          aria-label="Mavenä»“åº“"
          target="_blank"
        >
          <div
            class="bottom-0 right-0 w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
          >
            <Icon
              style="color: rgb(233, 211, 182);"
              name="mdi:chart-doughnut-variant"
              class="z-[1] size-1/2 text-primary sm:size-8 size-8"
              aria-hidden="true"
            />
          </div>
        </Link>
      </div>

      <div class="max-w max-h inline-block mt-[2.5em] ml-[-0.1em] sm:mt-[2.5em] sm:ml-[0em]">
        <Link
        href={DEV_LINKS.find((link) => link.label === 'Bytebase')?.href ||
          '#'}
          title="æ•°æ®åº“ç®¡ç†"
          aria-label="æ•°æ®åº“ç®¡ç†"
          target="_blank"
        >
          <div
            class="bottom-0 right-0 w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
          >
            <Icon
              style="color: rgb(233, 211, 182);"
              name="mdi:database-cog"
              class="z-[1] size-1/2 text-primary sm:size-8 size-8"
              aria-hidden="true"
            />
          </div>
        </Link>
      </div>

      <div class="max-w max-h inline-block mt-[-4em] sm:mt-[-3em]">
        <Link
        href={DEV_LINKS.find((link) => link.label === 'Zfile')?.href ||
          '#'}
          title="ç½‘ç›˜"
          aria-label="ç½‘ç›˜"
          target="_blank"
        >
          <div
            class="bottom-0 right-0 w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
          >
            <Icon
              style="color: rgb(233, 211, 182);"
              name="mdi:cloud-arrow-up"
              class="z-[1] size-1/2 text-primary sm:size-8 size-8"
              aria-hidden="true"
            />
          </div>
        </Link>
      </div>

      <div class="max-w max-h inline-block mt-[0.1em] sm:mt-[0.6em]">
        <Link
        href={DEV_LINKS.find((link) => link.label === 'FileServer')?.href ||
          '#'}
          title="æ–‡ä»¶æœåŠ¡å™¨"
          aria-label="æ–‡ä»¶æœåŠ¡å™¨"
          target="_blank"
        >
          <div
            class="bottom-0 right-0 w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
          >
            <Icon
              style="color: rgb(233, 211, 182);"
              name="mdi:file-arrow-up-down-outline"
              class="z-[1] size-1/2 text-primary sm:size-8 size-8"
              aria-hidden="true"
            />
          </div>
        </Link>
      </div>

      <div class="max-w max-h inline-block mt-[-6.5em] ml-[0.1em] sm:mt-[-5.3em] sm:ml-[0em]">
        <Link
        href={DEV_LINKS.find((link) => link.label === 'immich')?.href ||
          '#'}
          title="ç›¸å†Œ"
          aria-label="ç›¸å†Œ"
          target="_blank"
        >
          <div
            class="bottom-0 right-0 w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
          >
            <Icon
              style="color: rgb(233, 211, 182);"
              name="mdi:camera"
              class="z-[1] size-1/2 text-primary sm:size-8 size-8"
              aria-hidden="true"
            />
          </div>
        </Link>
      </div>

      <div class="max-w max-h inline-block mt-[0.2em] sm:mt-[0.6em]">
        <Link
        href={DEV_LINKS.find((link) => link.label === 'Emby')?.href ||
          '#'}
          title="Emby"
          aria-label="Emby"
          target="_blank"
        >
          <div
            class="bottom-0 right-0 w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
          >
            <Icon
              style="color: rgb(233, 211, 182);"
              name="mdi:emby"
              class="z-[1] size-1/2 text-primary sm:size-8 size-8"
              aria-hidden="true"
            />
          </div>
        </Link>
      </div>

      <div class="max-w max-h inline-block mt-[-6.5em] sm:mt-[-5.3em]">
        <Link
        href={DEV_LINKS.find((link) => link.label === 'Plex')?.href ||
          '#'}
          title="Plex"
          aria-label="Plex"
          target="_blank"
        >
          <div
            class="bottom-0 right-0 w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
          >
            <Icon
              style="color: rgb(233, 211, 182);"
              name="mdi:plex"
              class="z-[1] size-1/2 text-primary sm:size-8 size-8"
              aria-hidden="true"
            />
          </div>
        </Link>
      </div>

      <div class="max-w max-h inline-block mt-[1.49em] sm:mt-[1em]">
        <Link
        href={DEV_LINKS.find((link) => link.label === 'MovieRobot')?.href ||
          '#'}
          title="åª’ä½“è®¢é˜…å·¥å…·"
          aria-label="åª’ä½“è®¢é˜…å·¥å…·"
          target="_blank"
        >
          <div
            class="bottom-0 right-0 w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
          >
            <Icon
              style="color: #e9d3b6;"
              name="mdi:fruit-cherries"
              class="z-[1] size-1/2 text-primary sm:size-8 size-8"
              aria-hidden="true"
            />
          </div>
        </Link>
      </div>
    </div>

    <div
      class="aspect-[1/2.1] [grid-area:c] xl:aspect-auto"
      aria-hidden="true"
    >
    <MagnetLines client:load
      rows={9}
      columns={4}
      containerSize="100%"
      lineColor="#e9d3b6"
      lineWidth="0.8vmin"
      lineHeight="4vmin"
      baseAngle={0}
    />
    </div>

    <div class="relative overflow-hidden [grid-area:d] sm:aspect-square">
      <DiscordPresence client:load />
      

    </div>

    <div
      class="has-overlay grid grid-rows-2 relative flex aspect-[6/5] items-start overflow-hidden p-1 [grid-area:e] hover:bg-none sm:aspect-[2.1/1] sm:items-center xl:aspect-auto xl:bg-[url('/static/bento/blog-silhouette.webp')]"
      style="grid-template-rows: 9fr 1fr; "
    >
    <!-- todo: add blog tag by gradientText -->
      <div
        class="overlay absolute inset-0 size-full rounded-3xl bg-[url('/static/bento/blog-square.webp')] bg-cover bg-center bg-no-repeat transition-opacity duration-200 sm:bg-[url('/static/bento/blog.webp')] xl:opacity-0"
      >
      </div>
      {
        latestPost && (
          <>
            <img
              src={latestPost.data.image?.src ?? '#'}
              alt={`Featured image for the latest post: ${latestPost.data.title}`}
              width={477}
              height={251}
              class="w-full rounded-2xl border border-border sm:ml-1 sm:w-[82%] "
            />
            
            <div class="relative w-full rounded-xl overflow-hidden">
              <GradientText
                colors={["#fbb229", "#d0ff29", "#ff2000", "#ff29a9", "#b029ff"]}
                animationSpeed={4}
                showBorder={false}
                className="custom-class"
              >ðŸ”–{latestPost.data.title}
              </GradientText>
            </div>
            <Link
              href={`/blog/${latestPost.id}`}
              aria-label={`Read latest blog post: ${latestPost.data.title}`}
              title={`Read latest blog post: ${latestPost.data.title}`}
            >
              <div class="absolute bottom-0 right-0 m-3 flex w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary">
                <Icon name="lucide:move-up-right" size={16} />
              </div>
            </Link>
          </>
        )
      }
    </div>

    <div
      class="has-overlay relative flex aspect-square items-center justify-center overflow-hidden [grid-area:f] hover:bg-none sm:aspect-[2.1/1] xl:aspect-auto xl:bg-[url('/static/bento/contributions-silhouette.webp')]"
    >
      <div
        class="overlay absolute inset-0 z-[1] size-full rounded-3xl bg-[url('/static/bento/contributions-square.webp')] bg-cover bg-center bg-no-repeat transition-opacity duration-200 sm:bg-[url('/static/bento/contributions.webp')] xl:opacity-0"
      >
      </div>
      <GithubCalendar username="jimleerx" client:load />
    </div>

    <div
      class="overlay absolute inset-0 z-0 size-full rounded-3xl transition-opacity duration-200 xl:opacity-0has-overlay relative flex aspect-square sm:aspect-[1/1] xl:aspect-aspect-[1/1] [grid-area:g]"
    >
      <!-- <div
        class="overlay absolute inset-0 z-0 size-full rounded-3xl transition-opacity duration-200 xl:opacity-0"
      >
      </div> -->
      <DevCloudServices client:load />
    </div>

    <div
      class="aspect-[1/2.1] bg-[url('/static/bento/image-2.webp')] [grid-area:h] xl:aspect-auto"
      aria-hidden="true"
    >
    </div>

    <div
      class="has-overlay relative flex aspect-square items-center justify-center [grid-area:i] hover:bg-none xl:bg-[url('/static/bento/github-silhouette.webp')]"
    >
      <div
        class="overlay absolute inset-0 size-full rounded-3xl bg-[url('/static/bento/github.webp')] bg-cover bg-center bg-no-repeat transition-opacity duration-200 xl:opacity-0"
      >
      </div>
      <Icon
        name="mdi:github"
        class="absolute z-[1] size-1/2 text-primary sm:size-24"
        aria-hidden="true"
      />
      <Link
        href={SOCIAL_LINKS.find((link) => link.label === 'GitHub')?.href || '#'}
        title="Visit my GitHub profile"
        aria-label="Visit my GitHub profile"
        target="_blank"
      >
        <div
          class="absolute bottom-0 right-0 m-3 flex w-fit items-end rounded-full border bg-secondary/50 p-3 text-primary transition-all duration-300 hover:rotate-12 hover:ring-1 hover:ring-primary"
        >
          <Icon name="lucide:move-up-right" size={16} />
        </div>
      </Link>
    </div>

    <div class="aspect-square [grid-area:j]">
      <WakatimeGraph omitLanguages={['Markdown', 'JSON']} client:load />
    </div>

    <!-- service links -->
    <div
      class="has-overlay aspect-square [grid-area:k] "
    >
    <LetterGlitch client:load
      glitchColors={["#de17a5", "#5617de", "#e9d3b6"]},
      glitchSpeed={50}
      centerVignette={false}
      outerVignette={true}
      smooth={true}
    />
    </div>
  </section>
</Layout>
